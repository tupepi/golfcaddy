(this["webpackJsonpgolfcaddy-frontend"]=this["webpackJsonpgolfcaddy-frontend"]||[]).push([[0],{11:function(e,t,n){e.exports={Courses:"CourseListing_Courses__1n1D4",NewGame:"CourseListing_NewGame__1aL3P",courseListingDiv:"CourseListing_courseListingDiv__3ASSa",course:"CourseListing_course__16W8f",startNewGameButton:"CourseListing_startNewGameButton__EkL4m",addNewCourseButton:"CourseListing_addNewCourseButton__2qNWy"}},12:function(e,t,n){e.exports={Mainmenu:"Mainmenu_Mainmenu__2y-Df",mainMenuButtons:"Mainmenu_mainMenuButtons__32EWS"}},14:function(e,t,n){e.exports={Scorecards:"Scorecards_Scorecards__3j-IK",scorecardListingDiv:"Scorecards_scorecardListingDiv__20OhY",sortButton:"Scorecards_sortButton__pLwYw"}},16:function(e,t,n){e.exports={scorecard:"Scorecard_scorecard__PwugC",scorecardRow:"Scorecard_scorecardRow__1jVtg"}},51:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(26),o=n.n(a),s=n(3),u=n.n(s),i=n(4),l=n(2),j=n(10),d=n(16),b=n.n(d),f=function(e){return 0===e?"E":e>0?"+"+e:e},h={countRelativeScore:function(e,t){return e.reduce((function(e,n,r){return n?e+n-t[r].par:e}),0)},formalizeRelativeScore:f,countTotalScore:function(e){return e.reduce((function(e,t){return t?e+t:e}),0)},countFormalRelativeScore:function(e,t){return f(e.reduce((function(e,n,r){return n?e+n-t[r].par:e}),0))},countPar:function(e){var t=0;return e.score.map((function(n,r){return null===n?t:t+=e.course.pars[r].par})),t}},m=n(0),O=function(e){var t=e.scorecard;return t?Object(m.jsxs)("div",{className:b.a.scorecard,children:[Object(m.jsx)("h2",{children:"Scorecard"}),Object(m.jsx)("div",{children:Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Hole"}),Object(m.jsx)("th",{children:"Par"}),Object(m.jsx)("th",{children:"Strokes"})]})}),Object(m.jsxs)("tbody",{children:[t.score.map((function(e,n){return Object(m.jsxs)("tr",{className:b.a.scorecardRow,children:[Object(m.jsx)("td",{children:n+1}),Object(m.jsx)("td",{children:t.course.pars[n].par}),Object(m.jsx)("td",{children:e||"-"})]},n)})),Object(m.jsxs)("tr",{className:b.a.scorecardRow,children:[Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"total"})}),Object(m.jsx)("td",{children:h.countPar(t)}),Object(m.jsxs)("td",{children:[h.countTotalScore(t.score)," (",h.countFormalRelativeScore(t.score,t.course.pars),")"]})]},"total")]})]})})]}):null},p=n(14),v=n.n(p),x=function(e){var t=e.enter,n=e.rounds,c=Object(r.useState)([]),a=Object(l.a)(c,2),o=a[0],s=a[1],d=Object(r.useState)(!0),b=Object(l.a)(d,2),f=b[0],h=b[1],p=function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Object(m.jsx)(O,{scorecard:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){s(x(n))}),[n]);var x=function(e){return Object(j.a)(e).sort((function(e,t){var n=e.date,r=t.date;return n<r?1:n>r?-1:0}))},g=function(e){var t=e.split("T"),n=t[0].split("-"),r=t[1].split(".")[0].split(":"),c=parseInt(r[0],0)+3,a=r[1],o=r[2];return n[2]+"/"+n[1]+"/"+n[0]+" "+c+":"+a+":"+o};return Object(m.jsxs)("div",{className:v.a.Scorecards,children:[f?Object(m.jsx)("button",{className:v.a.sortButton,onClick:function(){s(x(n)),h(!f)},children:"Sort by date"}):Object(m.jsx)("button",{className:v.a.sortButton,onClick:function(){s(function(e){return Object(j.a)(e).sort((function(e,t){var n=e.course.name.toUpperCase(),r=t.course.name.toUpperCase();return n<r?-1:n>r?1:0}))}(n)),h(!f)},children:"Sort by course"}),Object(m.jsx)("h1",{children:"Scorecards"}),Object(m.jsx)("div",{className:v.a.scorecardListingDiv,children:o.map((function(e){return Object(m.jsxs)("div",{onClick:function(){return p(e)},children:[e.course.name,Object(m.jsx)("br",{}),g(e.date)]},e.date+e.player._id)}))})]})},g=n(7),_=n.n(g),S=function(e){var t=e.addCourse,n=e.name,c=e.pars,a=e.editCourse,o=Object(r.useState)(18),s=Object(l.a)(o,2),u=s[0],i=s[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),f=b[0],h=b[1],O=Object(r.useState)([3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),p=Object(l.a)(O,2),v=p[0],x=p[1];Object(r.useEffect)((function(){n&&(h(n),c&&x(c.map((function(e){return e.par}))),i(c.length))}),[c,n]);var g=function(e){if(!(e<=0)){if(e>u){for(var t=Object(j.a)(v),n=0;n<e-u;n++)t.push(3);x(t)}else x(v.splice(0,e));i(e)}},S=function(e,t){var n=v.map((function(n,r){return r+1===e&&n+t>0?n+t:n}));x(n)};return Object(m.jsx)("div",{className:_.a.NewCourse,children:Object(m.jsxs)("div",{className:_.a.NewCourseInfo,children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{htmlFor:"coursename",children:"Name"}),Object(m.jsx)("input",{type:"text",id:"coursename",name:"coursename",value:f,onChange:function(e){var t=e.target;return h(t.value)}})]}),Object(m.jsxs)("div",{className:_.a.courseLengthInfo,children:[Object(m.jsxs)("div",{children:["Number of holes: ",u]}),Object(m.jsxs)("div",{className:_.a.changeLengthButtons,children:[Object(m.jsx)("button",{onClick:function(){g(18)},children:"18"}),Object(m.jsx)("button",{onClick:function(){g(9)},children:"9"}),Object(m.jsx)("button",{onClick:function(){g(u-1)},children:"-"}),Object(m.jsx)("button",{onClick:function(){g(u+1)},children:"+"})]})]}),Object(m.jsx)("div",{className:_.a.holeList,children:v.map((function(e,t){return Object(m.jsxs)("div",{className:_.a.holeInfo,children:[Object(m.jsxs)("div",{children:["Hole ",1+t," Par:"]}),Object(m.jsx)("div",{className:_.a.holePar,children:e}),Object(m.jsxs)("div",{className:_.a.changeParButtons,children:[Object(m.jsx)("button",{onClick:function(){S(1+t,-1)},children:"-"}),Object(m.jsx)("button",{onClick:function(){S(1+t,1)},children:"+"})]})]},t)}))}),Object(m.jsx)("button",{className:_.a.saveNewCourse,onClick:function(){n?a({pars:v.map((function(e){return{par:e}})),name:f}):t({pars:v.map((function(e){return{par:e}})),name:f})},children:"Save"})]})})},N=n(6),C=n.n(N),w="/api/courses/",k={getAll:function(){return C.a.get(w).then((function(e){return e.data}))},create:function(e){return C.a.post(w,e).then((function(e){return e.data}))},get:function(e){return C.a.get("".concat(w,"/").concat(e)).then((function(e){return e.data}))},update:function(e){return C.a.put("".concat(w,"/").concat(e._id),e).then((function(e){return e.data}))}},y=n(11),I=n.n(y),L=function(e){var t=e.enterNewGame,n=e.enter,c=Object(r.useState)([]),a=Object(l.a)(c,2),o=a[0],s=a[1],j=Object(r.useState)(null),d=Object(l.a)(j,2),b=d[0],f=d[1];Object(r.useEffect)((function(){k.getAll().then((function(e){return s(e.sort((function(e,t){var n=e.name.toUpperCase(),r=t.name.toUpperCase();return n<r?-1:n>r?1:0})))}))}),[]);var h=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.create(t);case 2:n=e.sent,s(o.concat(n).sort((function(e,t){var n=e.name.toUpperCase(),r=t.name.toUpperCase();return n<r?-1:n>r?1:0}))),document.getElementsByClassName("backButton")[0].click();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({_id:b._id},t),e.next=3,k.update(n);case 3:r=e.sent,s(o.map((function(e){return e._id===r._id?r:e}))),document.getElementsByClassName("backButton")[0].click();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:I.a.NewGame,children:[t?Object(m.jsx)("h1",{children:"New Game"}):Object(m.jsx)("h1",{children:"Courses"}),Object(m.jsx)("div",{className:I.a.courseListingDiv,children:o.map((function(e){return Object(m.jsx)("div",{style:b&&e.name===b.name?{backgroundColor:"#B6B6B6"}:null,className:I.a.course,onClick:function(){!function(e){f(e)}(e)},children:Object(m.jsx)("span",{children:e.name})},e.name)}))}),b?t?Object(m.jsx)("button",{className:I.a.startNewGameButton,onClick:function(){t&&(localStorage.setItem("startingTime",JSON.stringify(new Date)),localStorage.setItem("currentCourse",JSON.stringify(b)),t())},children:"Start Game"}):Object(m.jsx)("button",{className:I.a.startNewGameButton,onClick:function(){n(Object(m.jsx)(S,{editCourse:function(e){return O(e)},name:b.name,pars:b.pars}))},children:"Edit Course"}):null,Object(m.jsx)("button",{className:I.a.addNewCourseButton,onClick:function(){n(Object(m.jsx)(S,{addCourse:function(e){return h(e)}}))},children:"Add New Course"})]})},B=n(8),D=n.n(B),P=function(e){var t=e.saveScore,n=Object(r.useState)(1),c=Object(l.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)([]),u=Object(l.a)(s,2),i=u[0],j=u[1],d=Object(r.useState)(null),b=Object(l.a)(d,2),f=b[0],O=b[1];Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("currentCourse"));O(e);var t=JSON.parse(localStorage.getItem("currentScore"));if(t){j(t);var n=parseInt(localStorage.getItem("currentHole"),10);o(n||1)}else j(e.pars.map((function(){return null})))}),[]),Object(r.useEffect)((function(){localStorage.setItem("currentScore",JSON.stringify(i))}),[i]);var p=function(e){if(!(1===i[a-1]&&e<0)){var t=i.map((function(t,n){return n!==a-1?t:t?t+e:f.pars[a-1].par}));j(t)}};return f?Object(m.jsxs)("div",{className:D.a.gamePlayDiv,children:[Object(m.jsx)("button",{className:D.a.finishRound,onClick:function(){t(f,i)},children:"finish round"}),Object(m.jsx)("h2",{children:f.name}),Object(m.jsxs)("div",{className:D.a.holeScoreDiv,children:[Object(m.jsx)("button",{onClick:function(){p(-1)},children:"-"}),Object(m.jsx)("div",{className:D.a.currentHoleScore,children:i[a-1]?i[a-1]:"-"}),Object(m.jsx)("button",{onClick:function(){p(1)},children:"+"})]}),Object(m.jsxs)("div",{className:D.a.holeInformationDiv,children:[Object(m.jsxs)("div",{className:D.a.holeDiv,children:["Hole: ",Object(m.jsx)("span",{children:a})]}),Object(m.jsxs)("div",{children:["Par: ",f.pars[a-1].par]}),Object(m.jsxs)("div",{children:["Score: ",h.countTotalScore(i)," (",h.countFormalRelativeScore(i,f.pars),")"]})]}),Object(m.jsx)("div",{className:D.a.holeList,children:f.pars.map((function(e,t){return Object(m.jsx)("div",{className:a===t+1?D.a.selectedHole:"",onClick:function(){return o(t+1)},children:Object(m.jsx)("p",{children:t+1})},t)}))})]}):null},E="/api/rounds/",G=function(){return{headers:{Authorization:"bearer ".concat(JSON.parse(localStorage.getItem("loggedUser")).token)}}},J={create:function(e){return C.a.post(E,e,G()).then((function(e){return e.data}))},get:function(e){return C.a.get("".concat(E,"/user/").concat(e),G()).then((function(e){return e.data}))}},R=n(12),U=n.n(R),H=function(e){var t=e.loggedUser,n=e.logout,c=Object(r.useState)([]),a=Object(l.a)(c,2),o=a[0],s=a[1];Object(r.useEffect)((function(){J.get(t._id).then((function(e){return s(e)}))}),[t]);var d=Object(r.useState)(null),b=Object(l.a)(d,2),f=b[0],h=b[1],p=function(){if(f&&f.length>1){var e=f.slice(0,-1);h(e)}else h(null)},v=function(e,t){h([].concat(Object(j.a)(S[e]),[t]))},g=function(){var e=Object(i.a)(u.a.mark((function e(n,r){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={date:JSON.parse(localStorage.getItem("startingTime")),player:t._id,course:n,score:r},e.next=3,J.create(c);case 3:a=e.sent,s(o.concat(a)),p(),h([Object(m.jsx)(O,{scorecard:a})]),localStorage.removeItem("currentCourse"),localStorage.removeItem("currentScore"),localStorage.removeItem("startingTime"),localStorage.removeItem("currentHole");case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!JSON.parse(localStorage.getItem("currentScore"))){e.next=13;break}if(!window.confirm("Start new round? Current one will be saved.")){e.next=12;break}return n={date:JSON.parse(localStorage.getItem("startingTime")),player:t._id,course:JSON.parse(localStorage.getItem("currentCourse")),score:JSON.parse(localStorage.getItem("currentScore"))},e.next=5,J.create(n);case 5:r=e.sent,s(o.concat(r)),localStorage.removeItem("currentScore"),localStorage.removeItem("currentCourse"),localStorage.removeItem("startingTime"),localStorage.removeItem("currentHole"),h(S[2]);case 12:return e.abrupt("return");case 13:h(S[2]);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=[[Object(m.jsx)("div",{className:U.a.subMenuDiv,children:Object(m.jsx)(x,{rounds:o,enter:function(e){return v(0,e)}})})],[Object(m.jsx)("div",{className:U.a.subMenuDiv,children:Object(m.jsx)(L,{enterNewGame:null,enter:function(e){return v(1,e)}})})],[Object(m.jsx)("div",{className:U.a.subMenuDiv,children:Object(m.jsx)(L,{enterNewGame:function(){h(S[3])},enter:function(e){return v(2,e)}})})],[Object(m.jsx)(P,{saveScore:g})]];return f?Object(m.jsxs)("div",{style:{height:"100%"},children:[Object(m.jsx)("button",{className:"backButton",onClick:p,children:"back"}),f[f.length-1]]}):Object(m.jsxs)("div",{className:U.a.Mainmenu,children:[Object(m.jsx)("h1",{children:"GolfCaddy"}),Object(m.jsxs)("div",{className:U.a.mainMenuButtons,children:[Object(m.jsx)("button",{onClick:_,children:"New game"}),Object(m.jsx)("button",{onClick:function(){JSON.parse(localStorage.getItem("currentScore"))?h(S[3]):window.confirm("no current round, start new?")&&_()},children:"Resume game"}),Object(m.jsx)("button",{onClick:function(){return h(S[1])},children:"Courses"}),Object(m.jsx)("button",{onClick:function(){return h(S[0])},children:"Scorecards"}),Object(m.jsx)("button",{onClick:function(){return n()},children:"Logout"})]})]})},M={create:function(e){return C.a.post("/api/users/",e).then((function(e){return e.data}))}},T=n(9),A=n.n(T),F=function(e){var t=e.login,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(""),j=Object(l.a)(s,2),d=j[0],b=j[1],f=Object(r.useState)(""),h=Object(l.a)(f,2),O=h[0],p=h[1],v=Object(r.useState)(!1),x=Object(l.a)(v,2),g=x[0],_=x[1],S=Object(r.useState)(""),N=Object(l.a)(S,2),C=N[0],w=N[1],k=Object(r.useState)(""),y=Object(l.a)(k,2),I=y[0],L=y[1],B=Object(r.useState)(A.a.input),D=Object(l.a)(B,2),P=D[0],E=D[1],G=function(e){w(e),L(A.a.error),E(A.a.inputError),setTimeout((function(){w(""),L(""),E(A.a.input)}),2e3)},J=function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,t({username:a,password:d});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),G(e.t0.response.data.error);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){o(""),b(""),_(e)},U=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d===O){e.next=4;break}return G("Please confirm password"),e.abrupt("return");case 4:return e.prev=4,e.next=7,M.create({username:a,password:d});case 7:o(""),b(""),_(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),G(e.t0.response.data.error);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:A.a.login,children:[g?Object(m.jsx)("h2",{children:"Create new account"}):Object(m.jsx)("h2",{children:"Login"}),Object(m.jsxs)("form",{className:A.a.form,onSubmit:function(){return g?{handleCreateAccount:U}:{handleLogin:J}},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"username"}),Object(m.jsx)("input",{className:P,id:"username",value:a,placeholder:"username",onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"password"}),Object(m.jsx)("input",{type:"password",className:P,id:"password",placeholder:"password",value:d,onChange:function(e){var t=e.target;return b(t.value)}})]}),g?Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"confirmPassword"}),Object(m.jsx)("input",{type:"password",className:P,id:"confirmPassword",placeholder:"confirm password",value:O,onChange:function(e){var t=e.target;return p(t.value)}})]}):null,Object(m.jsx)("div",{className:A.a.formButton,children:g?Object(m.jsx)("button",{onClick:U,children:"create"}):Object(m.jsx)("button",{onClick:J,children:"login"})})]}),Object(m.jsx)("div",{className:I,children:C}),Object(m.jsx)("div",{className:A.a.cancelButton,children:g?Object(m.jsx)("button",{onClick:function(){return R(!1)},children:"cancel"}):Object(m.jsx)("button",{onClick:function(){return R(!0)},children:"create new account"})})]})},V={login:function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(){Object(r.useEffect)((function(){c(JSON.parse(localStorage.getItem("loggedUser")))}),[]);var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],a=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.login(t);case 2:n=e.sent,c(n),localStorage.setItem("loggedUser",JSON.stringify(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(null),localStorage.clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=n?Object(m.jsx)(H,{loggedUser:n,logout:o}):Object(m.jsx)(F,{login:a});return Object(m.jsx)("div",{className:"App",children:s})};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(W,{})}),document.getElementById("root"))},7:function(e,t,n){e.exports={NewCourse:"NewCourse_NewCourse__j8ZWs",NewCourseInfo:"NewCourse_NewCourseInfo__2hqVU",courseLengthInfo:"NewCourse_courseLengthInfo__Ii0Ga",changeLengthButtons:"NewCourse_changeLengthButtons__2oV0N",holeInfo:"NewCourse_holeInfo__2clcT",holeList:"NewCourse_holeList__2PAAY",holePar:"NewCourse_holePar__391dk",changeParButtons:"NewCourse_changeParButtons__1_Y-C",saveNewCourse:"NewCourse_saveNewCourse__aVb5a",Scorecards:"NewCourse_Scorecards__2wPz2",scorecardListingDiv:"NewCourse_scorecardListingDiv__25-EL"}},8:function(e,t,n){e.exports={gamePlayDiv:"Gameplay_gamePlayDiv__2bFZR",holeScoreDiv:"Gameplay_holeScoreDiv__1L8Ej",currentHoleScore:"Gameplay_currentHoleScore__2htgR",holeInformationDiv:"Gameplay_holeInformationDiv__2tYEV",finishRound:"Gameplay_finishRound__2gTIV",holeDiv:"Gameplay_holeDiv__3twNw",holeList:"Gameplay_holeList__Uv24h",selectedHole:"Gameplay_selectedHole__3J8oK"}},9:function(e,t,n){e.exports={login:"Login_login__1IW4X",input:"Login_input__1waPm",inputError:"Login_inputError__249Ib",error:"Login_error__39anN",form:"Login_form__1ERcF",formButton:"Login_formButton__10kxP",cancelButton:"Login_cancelButton__2EslC"}}},[[51,1,2]]]);
//# sourceMappingURL=main.cb4ef987.chunk.js.map